import{_ as T,u as j,c as N,a as O,q as D,m as A,d as $,b as q,f as i,o as p,g,i as l,t as a,h as t,w as d,p as r,j as k,n as C,l as V,v as S,F as M,k as R}from"./app-81c86c8f.js";import{A as z}from"./AddressDialog-8d13091b.js";const G={data:()=>({mobileInputProps:{inputOptions:{type:"tel",placeholder:"phone number"},dropdownOptions:{showDialCodeInSelection:!1,showFlags:!0,showDialCodeInList:!0},autoDefaultCountry:!1,validCharactersOnly:!0,mode:"international"},v$:j(),form:{name:"",email:"",phone:"",invalidPhone:!1,avatar:"",previewAvatar:"",oldPassword:"",password:"",confirmPassword:""},passwordShow:!1,addDialogShow:!1,infoUpdateLoading:!1,addressSelectedForEdit:{}}),components:{VueTelInput:N,AddressDialog:z},validations:{form:{name:{required:O},password:{minLength:D(6)},confirmPassword:{minLength:D(6)}}},computed:{...A("auth",["currentUser"]),...A("app",["availableCountries"]),...A("address",["getAddresses","addressesLoaded","getDefaultShippingAddress","getDefaultBillingAddress"])},created(){this.form.name=this.currentUser.name,this.form.email=this.currentUser.email,this.form.phone=this.currentUser.phone,this.form.previewAvatar=this.currentUser.avatar,this.fetchAddresses()},methods:{...$("auth",["setUser"]),...$("address",["setAddresses"]),...q("address",["fetchAddresses"]),previewThumbnail(e){if(this.form.avatar=e.target.files[0],e.target.files&&e.target.files[0]){const s=new FileReader;s.onload=u=>{this.form.previewAvatar=u.target.result},s.readAsDataURL(e.target.files[0])}},phoneValidate(e){this.form.invalidPhone=!e.valid},async updateBasic(){this.infoUpdateLoading=!0;let e=new FormData;for(var s in this.form)e.append(s,this.form[s]);const u=await this.call_api("post","user/info/update",e,!0);u.data.success?(this.setUser(u.data.user),this.snack({message:u.data.message})):this.snack({message:u.data.message,color:"red"}),this.infoUpdateLoading=!1},async deleteAddress(e){const s=await this.call_api("get",`user/address/delete/${e}`);s.data.success&&(this.setAddresses(s.data.data),this.snack({message:s.data.message}))},editAddress(e){this.addressSelectedForEdit=e,this.addDialogShow=!0},async markDefaultShipping(e){const s=await this.call_api("get",`user/address/default-shipping/${e}`);s.data.success?(this.setAddresses(s.data.data),this.snack({message:s.data.message})):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},async markDefaultBilling(e){const s=await this.call_api("get",`user/address/default-billing/${e}`);s.data.success?(this.setAddresses(s.data.data),this.snack({message:s.data.message})):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},addressDialogClosed(){this.addressSelectedForEdit={},this.addDialogShow=!1}}},H={class:"ps-lg-7 pt-4"},J={class:"fs-21 fw-700 opacity-80 mb-5"},K=l("input",{type:"email",name:"hidden",style:{width:"0",height:"0",border:"0",padding:"0"}},null,-1),Q=l("input",{type:"password",name:"hidden",style:{width:"0",height:"0",border:"0",padding:"0"}},null,-1),W={class:"d-flex flex-column align-center justify-center border rounded pa-6 mb-3"},X={class:"avatar-upload"},Y=["src"],Z=l("i",{class:"las la-image"},null,-1),x={for:"avatar-input",class:"border border-gray-300 fs-14 fw-500 grey lighten-4 mt-3 opacity-50 px-4 py-1 rounded c-pointer"},ee={class:""},se={class:"fs-13 fw-600 opacity-80 mb-2"},ae={key:0,class:"border rounded pa-4 fs-13"},le={class:"fs-13 fw-600 opacity-80 mb-2"},te={key:0,class:"border rounded pa-4 fs-13"},de={class:"border rounded py-4 ps-4 pe-9 fs-13 position-relative"},oe=l("i",{class:"las la-ellipsis-v fs-18"},null,-1),ie={key:1,class:"text-center"};function ne(e,s,u,re,ue,n){const _=i("v-card-title"),c=i("v-text-field"),B=i("vue-tel-input"),U=i("v-avatar"),w=i("v-btn"),L=i("v-form"),b=i("v-card"),P=i("address-dialog"),m=i("v-col"),y=i("v-row"),h=i("v-list-item-title"),v=i("v-list-item"),F=i("v-list"),E=i("v-menu");return p(),g("div",H,[l("h1",J,a(e.$t("profile")),1),t(y,null,{default:d(()=>[t(m,{xl:"8"},{default:d(()=>[t(b,{elevation:"0",class:"mb-6"},{default:d(()=>[t(_,{class:"pa-0 fs-16 fw-700"},{default:d(()=>[r(a(e.$t("profile_information")),1)]),_:1}),t(L,{class:"py-4",onSubmit:s[9]||(s[9]=k(o=>n.updateBasic(),["prevent"])),enctype:"multipart/form-data"},{default:d(()=>[K,Q,l("label",null,a(e.$t("full_name")),1),t(c,{placeholder:e.$t("full_name"),modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=o=>e.form.name=o),variant:"outlined","hide-details":"auto",class:"mb-3"},null,8,["placeholder","modelValue"]),l("label",null,a(e.$t("email")),1),t(c,{placeholder:e.$t("email_address"),modelValue:e.form.email,"onUpdate:modelValue":s[1]||(s[1]=o=>e.form.email=o),variant:"outlined","hide-details":"auto",class:"mb-3",disabled:""},null,8,["placeholder","modelValue"]),l("label",null,a(e.$t("phone_number")),1),t(B,C({modelValue:e.form.phone,"onUpdate:modelValue":s[2]||(s[2]=o=>e.form.phone=o)},e.mobileInputProps,{onlyCountries:e.availableCountries,class:"mb-3 opacity-80",onValidate:n.phoneValidate,disabled:""}),null,16,["modelValue","onlyCountries","onValidate"]),l("label",null,a(e.$t("new_password")),1),t(c,{placeholder:"******",type:"password",modelValue:e.form.password,"onUpdate:modelValue":s[3]||(s[3]=o=>e.form.password=o),onBlur:s[4]||(s[4]=o=>e.v$.form.password.$touch()),variant:"outlined","hide-details":"auto",class:"mb-3"},null,8,["modelValue"]),l("label",null,a(e.$t("confirm_password")),1),t(c,{placeholder:"******",type:"password",modelValue:e.form.confirmPassword,"onUpdate:modelValue":s[5]||(s[5]=o=>e.form.confirmPassword=o),onBlur:s[6]||(s[6]=o=>e.v$.form.confirmPassword.$touch()),variant:"outlined","hide-details":"auto",class:"mb-3"},null,8,["modelValue"]),l("label",null,a(e.$t("profile_image")),1),l("div",W,[l("div",X,[t(U,{size:"160",class:""},{default:d(()=>[l("img",{src:e.form.previewAvatar,onError:s[7]||(s[7]=o=>e.imageFallback(o)),class:"user-dashboard-profile-image"},null,40,Y)]),_:1}),l("label",null,[l("input",{type:"file",id:"avatar-input",accept:"image/png, image/jpg, image/jpeg",onChange:s[8]||(s[8]=(...o)=>n.previewThumbnail&&n.previewThumbnail(...o))},null,32),Z])]),l("label",x,a(e.$t("select_image")),1)]),t(w,{type:"submit",loading:e.infoUpdateLoading,disabled:e.infoUpdateLoading,elevation:"0",class:"px-10 btn-primary",onClick:n.updateBasic},{default:d(()=>[r(a(e.$t("update")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1}),t(b,{elevation:"0"},{default:d(()=>[t(P,{show:e.addDialogShow,onClose:n.addressDialogClosed,"old-address":e.addressSelectedForEdit},null,8,["show","onClose","old-address"]),t(_,{class:"pa-0 fs-16 fw-700 mb-4"},{default:d(()=>[l("span",ee,a(e.$t("addresses")),1),t(w,{elevation:"0",class:"ms-auto float-right btn-primary",onClick:s[10]||(s[10]=k(o=>e.addDialogShow=!0,["stop"]))},{default:d(()=>[r(a(e.$t("add_new")),1)]),_:1})]),_:1}),t(y,{class:"mb-4 row-cols-1 row-cols-sm-2 gutters-10"},{default:d(()=>[t(m,null,{default:d(()=>[l("div",se,a(e.$t("default_shipping_address")),1),e.getDefaultShippingAddress?(p(),g("div",ae,[l("div",null,a(e.getDefaultShippingAddress.address),1),l("div",null,a(e.getDefaultShippingAddress.postal_code)+", "+a(e.getDefaultShippingAddress.city)+", "+a(e.getDefaultShippingAddress.state),1),l("div",null,a(e.getDefaultShippingAddress.country),1),l("div",null,a(e.getDefaultShippingAddress.phone),1)])):V("",!0)]),_:1}),t(m,null,{default:d(()=>[l("div",le,a(e.$t("default_billing_address")),1),e.getDefaultBillingAddress?(p(),g("div",te,[l("div",null,a(e.getDefaultBillingAddress.address),1),l("div",null,a(e.getDefaultBillingAddress.postal_code)+", "+a(e.getDefaultBillingAddress.city)+", "+a(e.getDefaultBillingAddress.state),1),l("div",null,a(e.getDefaultBillingAddress.country),1),l("div",null,a(e.getDefaultBillingAddress.phone),1)])):V("",!0)]),_:1})]),_:1})]),_:1}),t(b,{elevation:"0"},{default:d(()=>[t(_,{class:"pa-0 fs-16 fw-700 mb-4"},{default:d(()=>[r(a(e.$t("all_addresses")),1)]),_:1}),l("div",null,[e.addressesLoaded&&e.getAddresses.length>0?(p(),S(y,{key:0,class:"row-cols-1 row-cols-sm-2 gutters-10"},{default:d(()=>[(p(!0),g(M,null,R(e.getAddresses,(o,I)=>(p(),S(m,{key:I},{default:d(()=>[l("div",de,[l("div",null,a(o.address),1),l("div",null,a(o.postal_code)+", "+a(o.city)+", "+a(o.state),1),l("div",null,a(o.country),1),l("div",null,a(o.phone),1),t(E,{"offset-y":"",left:""},{activator:d(({props:f})=>[t(w,C({ref_for:!0},f,{class:"absolute-top-right",color:"transparent",elevation:"0",fab:"",small:""}),{default:d(()=>[oe]),_:2},1040)]),default:d(()=>[t(F,{class:""},{default:d(()=>[t(v,{class:"c-pointer",onClick:f=>n.editAddress(o)},{default:d(()=>[t(h,null,{default:d(()=>[r(a(e.$t("edit")),1)]),_:1})]),_:2},1032,["onClick"]),t(v,{class:"c-pointer",onClick:f=>n.markDefaultShipping(o.id)},{default:d(()=>[t(h,null,{default:d(()=>[r(a(e.$t("mark_as_default_shipping_address")),1)]),_:1})]),_:2},1032,["onClick"]),t(v,{class:"c-pointer",onClick:f=>n.markDefaultBilling(o.id)},{default:d(()=>[t(h,null,{default:d(()=>[r(a(e.$t("mark_as_default_billing_address")),1)]),_:1})]),_:2},1032,["onClick"]),t(v,{class:"c-pointer",onClick:f=>n.deleteAddress(o.id)},{default:d(()=>[t(h,null,{default:d(()=>[r(a(e.$t("delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(p(),g("div",ie,[l("div",null,a(e.$t("no_saved_address")),1)]))])]),_:1})]),_:1}),t(m,{cols:"auto"})]),_:1})])}const fe=T(G,[["render",ne]]);export{fe as default};
