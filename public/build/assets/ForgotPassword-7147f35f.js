import{_ as k,u as S,c as C,r as c,e as F,m as f,f as d,o as i,g as a,h as n,w as r,i as s,t as o,j as V,F as I,k as q,l as h,n as N,p as u}from"./app-81c86c8f.js";const D={data:()=>({mobileInputProps:{inputOptions:{type:"tel",placeholder:"phone number"},dropdownOptions:{showDialCodeInSelection:!1,showFlags:!0,showDialCodeInList:!0},autoDefaultCountry:!1,validCharactersOnly:!0,mode:"international"},showPhoneField:!1,v$:S(),form:{email:"",phone:"",invalidPhone:!0,showInvalidPhone:!1},loading:!1}),components:{VueTelInput:C},validations:{form:{email:{requiredIf:c(function(){return this.authSettings.customer_login_with=="email"||this.authSettings.customer_login_with=="email_phone"&&!this.showPhoneField}),email:F},phone:{requiredIf:c(function(){return this.authSettings.customer_login_with=="phone"||this.authSettings.customer_login_with=="email_phone"&&this.showPhoneField})}}},computed:{...f("app",["availableCountries"]),...f("auth",["authSettings"]),emailErrors(){const e=[];return this.v$.form.email.$dirty&&(!this.v$.form.email.requiredIf&&e.push(this.$i18n.t("this_field_is_required")),!this.v$.form.email.email&&e.push(this.$i18n.t("this_field_is_required_a_valid_email"))),e}},methods:{phoneValidate(e){this.form.invalidPhone=!e.valid,e.valid&&(this.form.showInvalidPhone=!1)},async resetPassword(){if(!await this.v$.$validate())return;if((this.authSettings.customer_login_with=="phone"||this.authSettings.customer_login_with=="email_phone"&&this.showPhoneField)&&this.form.invalidPhone){this.form.showInvalidPhone=!0;return}this.form.phone=this.form.phone.replace(/\s/g,""),this.loading=!0;const t=await this.call_api("post","auth/password/create",this.form);t.data.success?(t.data.email?this.$router.push({name:"NewPassword",params:{email:this.form.email}}):this.$router.push({name:"NewPassword",params:{phone:this.form.phone}}),this.snack({message:t.data.message})):this.snack({message:t.data.message,color:"red"}),this.loading=!1}}},B={class:"my-5 my-lg-16 rounded-lg pa-5 border overflow-hidden shadow-light"},L={class:"px-lg-7"},O={class:"text-uppercase lh-1 mb-4"},E={class:"display-1 primary--text fw-900"},T={class:"d-block display-1 fw-900 grey--text text--darken-3"},U=s("span",{class:"fs-22 fw-900 display-3 primary--text"},"?",-1),j={key:0,class:"fs-16 fw-500 mb-6"},z={key:1,class:"fs-16 fw-500 mb-6"},G={key:2,class:"fs-16 fw-500 mb-6"},M={key:0,class:"mb-6"},A={class:"mb-1 fs-13 fw-500"},H={key:0,class:"text-end font-italic fs-12 opacity-70"},J={key:1,class:"mb-6"},K={class:"mb-1 fs-13 fw-500"},Q=s("template",{slot:"arrow-icon"},[s("span",{class:"vti__dropdown-arrow"}," ▼")],-1),R={key:0,class:"v-text-field__details mt-2 pl-3"},W={class:"v-messages theme--light error--text",role:"alert"},X={class:"v-messages__wrapper"},Y={class:"v-messages__message"},Z={key:1,class:"v-text-field__details mt-2 pl-3"},x={class:"v-messages theme--light error--text",role:"alert"},ee={class:"v-messages__wrapper"},se={class:"v-messages__message"},te={key:2,class:"text-end font-italic fs-12 opacity-70"};function oe(e,t,ie,ae,ne,m){const v=d("banner"),_=d("v-col"),g=d("v-text-field"),w=d("vue-tel-input"),y=d("v-btn"),$=d("v-form"),b=d("router-link"),p=d("v-row"),P=d("v-container");return i(),a("div",null,[n(P,null,{default:r(()=>[n(p,null,{default:r(()=>[n(_,{xl:"10",class:"mx-auto"},{default:r(()=>[s("div",B,[n(p,{"no-gutters":"",align:"center"},{default:r(()=>[n(_,{cols:"12",lg:"6",order:"2","order-lg":"1",class:"lh-0"},{default:r(()=>[n(v,{loading:!1,banner:e.$store.getters["app/banners"].forgot_page,class:"mt-5 mt-lg-0"},null,8,["banner"])]),_:1}),n(_,{cols:"12",order:"1","order-lg":"2",lg:"6"},{default:r(()=>[s("div",L,[s("h1",O,[s("span",E,o(e.$t("forgot")),1),s("span",T,o(e.$t("password")),1),U]),e.authSettings.customer_login_with=="email"?(i(),a("div",j,o(e.$t("enter_your_email_address_to_recover_your_password")),1)):e.authSettings.customer_login_with=="phone"?(i(),a("div",z,o(e.$t("enter_your_phone_number_to_recover_your_password")),1)):(i(),a("div",G,o(e.$t("enter_your_email_address_or_phone_number_to_recover_your_password")),1)),n($,{ref:"loginForm","lazy-validation":"",onSubmit:t[4]||(t[4]=V(l=>m.resetPassword(),["prevent"]))},{default:r(()=>[e.authSettings.customer_login_with=="email"||!e.showPhoneField&&e.authSettings.customer_login_with=="email_phone"?(i(),a("div",M,[s("div",A,o(e.$t("email")),1),n(g,{variant:"plain",class:"text-field",placeholder:e.$t("email_address"),type:"email",modelValue:e.form.email,"onUpdate:modelValue":t[0]||(t[0]=l=>e.form.email=l),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(i(!0),a(I,null,q(e.v$.form.email.$errors,l=>(i(),a("p",{key:l.$uid,class:"text-red"},o(l.$message),1))),128)),e.authSettings.customer_login_with=="email_phone"?(i(),a("div",H,[s("span",{class:"text-primary c-pointer",onClick:t[1]||(t[1]=l=>e.showPhoneField=!e.showPhoneField)},o(e.$t("use_phone_instead")),1)])):h("",!0)])):h("",!0),e.authSettings.customer_login_with=="phone"||e.showPhoneField&&e.authSettings.customer_login_with=="email_phone"?(i(),a("div",J,[s("div",K,o(e.$t("phone_number")),1),n(w,N({modelValue:e.form.phone,"onUpdate:modelValue":t[2]||(t[2]=l=>e.form.phone=l)},e.mobileInputProps,{onlyCountries:e.availableCountries,onValidate:m.phoneValidate}),{default:r(()=>[Q]),_:1},16,["modelValue","onlyCountries","onValidate"]),e.v$.form.phone.$error?(i(),a("div",R,[s("div",W,[s("div",X,[s("div",Y,o(e.$t("this_field_is_required")),1)])])])):h("",!0),!e.v$.form.phone.$error&&e.form.showInvalidPhone?(i(),a("div",Z,[s("div",x,[s("div",ee,[s("div",se,o(e.$t("phone_number_must_be_valid")),1)])])])):h("",!0),e.authSettings.customer_login_with=="email_phone"?(i(),a("div",te,[s("span",{onClick:t[3]||(t[3]=l=>e.showPhoneField=!e.showPhoneField),class:"primary--text"},o(e.$t("use_phone_instead")),1)])):h("",!0)])):h("",!0),n(y,{"x-large":"",class:"px-12 mb-4",elevation:"0",type:"submit",color:"primary",onClick:m.resetPassword,loading:e.loading,disabled:e.loading},{default:r(()=>[u(o(e.$t("send_password_reset_code")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1},512),s("div",null,[u(o(e.$t("back_to"))+" ",1),n(b,{to:{name:"Login"},class:"primary--text text-decoration-underline"},{default:r(()=>[u(o(e.$t("login")),1)]),_:1})])])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})])}const le=k(D,[["render",oe]]);export{le as default};
