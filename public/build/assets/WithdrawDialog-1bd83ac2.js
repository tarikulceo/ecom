import{u as w,a as v,c4 as _,m as q,b as V,_ as b,f as o,o as d,v as k,w as l,i as u,h as n,t as r,g as m,k as $,F as y,p as f,j as A}from"./app-81c86c8f.js";const C={props:{from:{type:String,default:"/user/wallet"},show:{type:Boolean,required:!0,default:!1}},data:()=>({v$:w(),loading:!1,requestedAmount:0}),validations:{requestedAmount:{required:v,minValue:_(1)}},computed:{...q("affiliate",["getAffiliateBalance"]),isVisible:{get:function(){return this.show},set:function(e){}}},methods:{...V("affiliate",["fetchWithdrawRequest"]),closeDialog(){this.isVisible=!1,this.receipt=null,this.$emit("close")},async withdrawalRequest(){if(!await this.v$.$validate())return;if(this.getAffiliateBalance<this.requestedAmount){this.snack({message:this.$i18n.t("you can't request for withdraw more than your affiliate balance"),color:"red"});return}this.loading=!1;const t={amount:this.requestedAmount},i=await this.call_api("post","user/affiliate/withdraw-request",t);i.data.success?(this.fetchWithdrawRequest(),this.requestedAmount=0,this.snack({message:this.$i18n.t(i.data.message),color:"green"}),this.loading=!1,this.closeDialog()):this.snack({message:i.data.message,color:"red"})}}},B={class:"white pa-5 rounded"},D={class:"opacity-80 mb-3 fs-18 mt-3"},x={class:"text-right mt-4"};function F(e,t,i,N,R,s){const h=o("v-text-field"),c=o("v-btn"),p=o("v-form"),g=o("v-dialog");return d(),k(g,{modelValue:s.isVisible,"onUpdate:modelValue":t[2]||(t[2]=a=>s.isVisible=a),"max-width":"700px","onClick:outside":s.closeDialog},{default:l(()=>[u("div",B,[n(p,{"lazy-validation":"",onSubmit:t[1]||(t[1]=A(()=>{},["prevent"]))},{default:l(()=>[u("h3",D,r(e.$t("affiliate_withdraw_request")),1),n(h,{variant:"plain",class:"text-field",placeholder:e.$t("withdrawal_amount"),type:"Number",modelValue:e.requestedAmount,"onUpdate:modelValue":t[0]||(t[0]=a=>e.requestedAmount=a),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(d(!0),m(y,null,$(e.v$.requestedAmount.$errors,a=>(d(),m("p",{key:a.$uid,class:"text-red"},r(a.$message),1))),128)),u("div",x,[n(c,{text:"",onClick:s.closeDialog,elevation:"0",class:"mr-4"},{default:l(()=>[f(r(e.$t("cancel")),1)]),_:1},8,["onClick"]),n(c,{elevation:"0",type:"submit",color:"primary",onClick:s.withdrawalRequest,loading:e.loading,disabled:e.loading},{default:l(()=>[f(r(e.$t("confirm")),1)]),_:1},8,["onClick","loading","disabled"])])]),_:1})])]),_:1},8,["modelValue","onClick:outside"])}const S=b(C,[["render",F]]);export{S as W};
