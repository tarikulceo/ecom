import{_ as h,f as i,o as c,g,i as o,t as r,h as d,w as l,l as _,A as f,p as v}from"./app-81c86c8f.js";const w={data:()=>({loading:!0,currentPage:1,totalPages:1,products:[]}),computed:{headers(){return[{title:this.$i18n.t("product"),align:"start",sortable:!1,value:"name"},{title:this.$i18n.t("image"),align:"start",sortable:!1,value:"image"},{title:this.$i18n.t("actions"),sortable:!1,align:"end",value:"actions"}]}},watch:{currentPage(){this.$router.push({query:{...this.$route.query,page:this.currentPage}}).catch(()=>{})}},methods:{async getList(e){this.loading=!0;const t=await this.call_api("get",`user/orders/downloads?page=${e}`);t.data.success?(this.products=t.data.data,this.totalPages=t.data.meta.last_page,this.currentPage=t.data.meta.current_page):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.loading=!1},async downloadProduct(e){const t=e.file_path,s=document.createElement("a");s.href=t,s.download=e.name,s.click()}},created(){let e=this.$route.query.page||this.currentPage;this.getList(e)}},P={class:"ps-lg-7 pt-4"},$={class:"fs-24 fw-700 opacity-80 mb-5 mt-3"},b={class:"d-block fw-600"},y=["src"],k={key:0,class:"text-start"};function V(e,t,s,C,x,n){const u=i("v-btn"),m=i("v-data-table"),p=i("v-pagination");return c(),g("div",P,[o("h1",$,r(e.$t("download_your_products")),1),o("div",null,[d(m,{headers:n.headers,items:e.products,class:"border px-4 pt-3","loading-text":e.$t("loading_please_wait"),"hide-default-footer":"",loading:e.loading,"item-class":"c-pointer"},{"item.name":l(({item:a})=>[o("span",b,r(a.name),1)]),"item.image":l(({item:a})=>[o("img",{src:a.image,class:f(["img-fit","size-80px"])},null,8,y)]),"item.actions":l(({item:a})=>[d(u,{onClick:N=>n.downloadProduct(a),text:"",size:"small",elevation:"0",class:"px-2 text-primary"},{default:l(()=>[v(r(e.$t("download")),1)]),_:2},1032,["onClick"])]),_:2},1032,["headers","items","loading-text","loading"]),e.totalPages>1?(c(),g("div",k,[d(p,{modelValue:e.currentPage,"onUpdate:modelValue":[t[0]||(t[0]=a=>e.currentPage=a),n.getList],length:e.totalPages,"prev-icon":"las la-angle-left","next-icon":"las la-angle-right","total-visible":7,elevation:"0",class:"my-4"},null,8,["modelValue","onUpdate:modelValue","length"])])):_("",!0)])])}const z=h(w,[["render",V]]);export{z as default};
